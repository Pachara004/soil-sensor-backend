# üìö API Endpoints Documentation

## üéØ **‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö API**

‡∏£‡∏∞‡∏ö‡∏ö Soil Sensor Backend ‡∏°‡∏µ API endpoints ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î **6 modules ‡∏´‡∏•‡∏±‡∏Å** ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà:

1. **Authentication (auth)** - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
2. **Users** - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
3. **Devices** - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå IoT
4. **Measurements** - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
5. **Reports** - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤
6. **Images** - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û

---

## üîê **1. Authentication API (`/api/auth`)**

### **User Registration & Login**

#### **POST `/api/auth/register`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà
- **Body:** `{ email, username, name, phoneNumber, type, firebaseUid }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å

#### **POST `/api/auth/login`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ email/password
- **Body:** `{ email, password }`
- **Response:** JWT token ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ login

#### **POST `/api/auth/google-login`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google
- **Body:** `{ idToken }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** Google Sign-In

### **Password Management**

#### **POST `/api/auth/send-otp`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏™‡πà‡∏á OTP ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
- **Body:** `{ email }`
- **Response:** `{ message, ref }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ forgot password

#### **POST `/api/auth/verify-otp`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô OTP
- **Body:** `{ email, otp, referenceNumber }`
- **Response:** `{ message }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏™‡πà OTP

#### **PUT `/api/auth/reset-password`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
- **Body:** `{ email, otp, newPassword, referenceNumber }`
- **Response:** `{ message }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà

### **User Profile**

#### **GET `/api/auth/me`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **Headers:** `Authorization: Bearer <token>`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå

#### **PUT `/api/auth/profile`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
- **Body:** `{ user_name, user_phone }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå

### **Account Management**

#### **DELETE `/api/auth/delete-account`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
- **Response:** `{ message, deletedUser }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ

#### **DELETE `/api/auth/admin/delete-user/:userid`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô
- **Params:** `userid`
- **Response:** `{ message, deletedUser }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

### **Utility Endpoints**

#### **GET `/api/auth/check-email/:email`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ email ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **Response:** `{ exists: boolean }`

#### **GET `/api/auth/check-username/:username`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ username ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- **Response:** `{ exists: boolean }`

#### **POST `/api/auth/debug-token`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Debug token (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö development)
- **Body:** `{ token }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£ verify token

---

## üë• **2. Users API (`/api/users`)**

### **User Management**

#### **GET `/api/users`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** 
  - Admin: ‡∏î‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - User: ‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
- **Response:** `{ users: [] }` ‡∏´‡∏£‡∏∑‡∏≠ `{ user: {} }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin, ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå

#### **GET `/api/users/all`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏î‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Response:** `{ users: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin

#### **GET `/api/users/regular`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏î‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà admin)
- **Response:** `{ users: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin

#### **GET `/api/users/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡πÉ‡∏î‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á
- **Params:** `id`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

#### **PUT `/api/users/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Body:** `{ user_name, user_phone, user_email }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß

#### **PUT `/api/users/:id/role`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô role ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Body:** `{ role }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß

#### **DELETE `/api/users/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Response:** `{ message }`

### **User Statistics**

#### **GET `/api/users/stats`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Response:** `{ totalUsers, adminUsers, regularUsers }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** Dashboard admin

### **User Profile (Alias)**

#### **GET `/api/users/profile`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (alias ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Angular)
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

#### **PUT `/api/users/change-password/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
- **Body:** `{ currentPassword, newPassword }`
- **Response:** `{ message }`

---

## üì± **3. Devices API (`/api/devices`)**

### **Device Management**

#### **GET `/api/devices`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Response:** `{ devices: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå

#### **GET `/api/devices/by-username/:username`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡πÉ‡∏î‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á
- **Params:** `username`
- **Response:** `{ devices: [] }`

#### **POST `/api/devices`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà
- **Body:** `{ device_name, device_type, description }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

#### **POST `/api/devices/claim`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Body:** `{ device_id, device_name }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß

#### **PUT `/api/devices/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Body:** `{ device_name, device_type, description, status }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß

#### **DELETE `/api/devices/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏•‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Response:** `{ message }`

### **Admin Device Management**

#### **POST `/api/devices/admin/add`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Body:** `{ device_id, device_name, device_type }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà

#### **POST `/api/devices/admin/claim`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Body:** `{ device_id, userid }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß

---

## üìä **4. Measurements API (`/api/measurements`)**

### **Area Management**

#### **GET `/api/measurements/areas`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Query:** `?deviceid=<id>` (optional)
- **Response:** `[ { areasid, area_name, ... } ]`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î

#### **GET `/api/measurements/areas/with-measurements`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
- **Query:** `?deviceid=<id>` (optional)
- **Response:** ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏à‡∏∏‡∏î
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

#### **POST `/api/measurements/create-area-immediately`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
- **Body:** `{ area_name, deviceId, area_size, coordinates }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)

#### **POST `/api/measurements/create-area`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
- **Body:** `{ area_name, measurements, deviceId }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à)

#### **PUT `/api/measurements/update-area/:areaId`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
- **Body:** `{ measurements: [] }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢)

### **Measurement Data**

#### **GET `/api/measurements/:deviceId`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Params:** `deviceId`
- **Response:** `[ { measurementid, temperature, ... } ]`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå

#### **GET `/api/measurements/area/:areaId`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
- **Params:** `areaId`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πâ‡∏ô
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà

#### **POST `/api/measurements/single-point`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- **Body:** `{ deviceId, temperature, moisture, ph, ..., lat, lng, areaId }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ (‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡∏•‡∏∞‡∏à‡∏∏‡∏î)

#### **POST `/api/measurements`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
- **Body:** `{ deviceId, temperature, moisture, ph, ..., lat, lng }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß

#### **PUT `/api/measurements/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
- **Body:** `{ temperature, moisture, ph, ... }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß

#### **DELETE `/api/measurements/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î
- **Response:** `{ message }`

---

## üìã **5. Reports API (`/api/reports`)**

### **Report Management**

#### **GET `/api/reports`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** 
  - Admin: ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - User: ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
- **Response:** `{ reports: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤

#### **GET `/api/reports/user`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **Response:** `{ reports: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß

#### **GET `/api/reports/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞
- **Params:** `id`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

#### **POST `/api/reports`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
- **Body:** `{ title, description, type, priority, images }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤

#### **PUT `/api/reports/:id/status`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- **Body:** `{ status }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

#### **DELETE `/api/reports/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- **Response:** `{ message }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

---

## üñºÔ∏è **6. Images API (`/api/images`)**

### **Image Management**

#### **GET `/api/images`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Response:** `{ images: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û

#### **GET `/api/images/report/:reportId`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- **Params:** `reportId`
- **Response:** `{ images: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

#### **GET `/api/images/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏â‡∏û‡∏≤‡∏∞
- **Params:** `id`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û

#### **POST `/api/images`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏°‡πà
- **Body:** `{ reportid, imageUrl }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

#### **PUT `/api/images/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- **Body:** `{ imageUrl }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß

#### **DELETE `/api/images/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- **Response:** `{ message }`

#### **GET `/api/images/stats`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- **Response:** `{ totalImages, imagesByReport }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** Dashboard admin

---

## üîß **7. Admin API (`/api/admin`)**

### **Admin Device Management**

#### **GET `/api/admin/devices`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏î‡∏π‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Response:** `{ devices: [] }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** ‡∏´‡∏ô‡πâ‡∏≤ admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå

#### **POST `/api/admin/devices`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà
- **Body:** `{ device_id, device_name, device_type }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà

#### **DELETE `/api/admin/devices/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏•‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
- **Response:** `{ message }`

### **Admin User Management**

#### **GET `/api/admin/users`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏î‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- **Response:** `{ users: [] }`

#### **PUT `/api/admin/users/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Body:** `{ user_name, user_email, role }`
- **Response:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß

#### **DELETE `/api/admin/users/:id`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** Admin ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **Response:** `{ message }`

---

## üè• **8. Health Check API**

#### **GET `/health`**
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö
- **Response:** `{ status, firebase, email, timestamp }`
- **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:** Monitoring, Health Check

---

## üîê **Authentication & Authorization**

### **Authentication Methods:**
1. **Firebase ID Token** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Sign-In
2. **JWT Token** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö email/password login

### **Authorization Levels:**
1. **Public** - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á login (health, check-email, check-username)
2. **User** - ‡∏ï‡πâ‡∏≠‡∏á login (measurements, devices, reports ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á)
3. **Admin** - ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ role admin (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)

### **Headers Required:**
```
Authorization: Bearer <firebase_token_or_jwt_token>
Content-Type: application/json
```

---

## üì± **Usage Examples**

### **1. User Registration:**
```javascript
POST /api/auth/register
{
  "email": "user@example.com",
  "username": "testuser",
  "name": "Test User",
  "phoneNumber": "0812345678",
  "type": "user",
  "firebaseUid": "firebase_uid_here"
}
```

### **2. Create Measurement Area:**
```javascript
POST /api/measurements/create-area-immediately
{
  "area_name": "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö 1",
  "deviceId": "26",
  "area_size": "100.5",
  "coordinates": [[lat, lng], [lat, lng], ...]
}
```

### **3. Save Single Measurement:**
```javascript
POST /api/measurements/single-point
{
  "deviceId": "26",
  "temperature": 25.5,
  "moisture": 65.2,
  "ph": 6.8,
  "phosphorus": 15.3,
  "potassium": 20.1,
  "nitrogen": 12.7,
  "lat": 16.246,
  "lng": 103.250,
  "areaId": 27
}
```

### **4. Create Report:**
```javascript
POST /api/reports
{
  "title": "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á",
  "description": "‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô",
  "type": "technical",
  "priority": "high",
  "images": ["https://example.com/image1.jpg"]
}
```

---

## üéØ **‡∏™‡∏£‡∏∏‡∏õ**

‡∏£‡∏∞‡∏ö‡∏ö API ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î **50+ endpoints** ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô:
- **Authentication:** 12 endpoints
- **Users:** 10 endpoints  
- **Devices:** 8 endpoints
- **Measurements:** 12 endpoints
- **Reports:** 6 endpoints
- **Images:** 7 endpoints
- **Admin:** 6 endpoints
- **Health:** 1 endpoint

**‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å:**
1. **Mobile/Web App** - ‡πÉ‡∏ä‡πâ Firebase Auth + API calls
2. **Admin Panel** - ‡πÉ‡∏ä‡πâ JWT Auth + Admin APIs
3. **IoT Devices** - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô Measurements API
4. **Monitoring** - ‡πÉ‡∏ä‡πâ Health Check API

**Security Features:**
- JWT & Firebase Authentication
- Role-based Authorization  
- Input Validation
- Error Handling
- Rate Limiting (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
